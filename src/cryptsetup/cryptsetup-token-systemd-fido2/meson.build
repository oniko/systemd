# SPDX-License-Identifier: LGPL-2.1-or-later

if conf.get('HAVE_LIBCRYPTSETUP_PLUGINS') == 1

cryptsetup_token_systemd_fido2_sources = files('''
        cryptsetup-token-systemd-fido2.c
        cryptsetup-token.h
        luks2-fido2.c
        luks2-fido2.h
'''.split())

cryptsetup_token_systemd_fido2_c_args = ['-fvisibility=hidden']

cryptsetup_token_systemd_fido2_static = static_library(
        'cryptsetup-token-systemd-fido2_static',
        cryptsetup_token_systemd_fido2_sources,
        include_directories : includes,
        dependencies : libshared_deps + [libcryptsetup],
        c_args : cryptsetup_token_systemd_fido2_c_args)

cryptsetup_token_systemd_fido2_sym = files('cryptsetup-token.sym')
cryptsetup_token_systemd_fido2_sym_path = join_paths(meson.current_source_dir(), 'cryptsetup-token.sym')

endif
